<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="draw.css">

</head>
<body>
    <h1>Scroll-to-draw</h1>

<svg xmlns="../choir.svg" viewBox="0 0 100.6 107.6" id="star-svg">
  <path fill="none" stroke="white" stroke-width="2" id="star-path" d="M9.9,293.3c9.1,3.5,19.7-1.4,25.6-9.1c5.8-7.8,7.8-17.7,8.8-27.4c0.9-9.7,1-19.5,3.8-28.8
  c2.1-7,7.5-14.6,14.7-13.8c3.3,0.4,6.2,2.6,8.5,5.1c3.1,3.5,5.2,8.4,3.7,12.7c-2.4,6.7-12.9,7.5-17.5,2.1
  c-4.6-5.5-3.4-14.2,1.1-19.7c4.6-5.5,11.6-8.2,18.6-9.6c8.6-1.7,17.4-1.6,26.1-1.9c5.6-0.2,11.3-0.6,16.4-2.8
  c10-4.2,16.5-14.7,17.4-25.4c0.9-10.8-3.2-21.5-9.9-30c-5.9-7.5-13.9-13.6-23.2-16c-14.2-3.6-30.3,2.5-38.5,14.5
  c-8.2,12.1-8,29.3,0.6,41.2c12.5,17.2,36.5,19.8,56.7,26.4c6.5,2.1,13.3,5.3,16.1,11.5c2.7,6.2-2.2,15.4-8.8,13.9
  c-5.1-1.1-7.3-7.3-6.7-12.5c0.3-2.3,1-4.7,2.6-6.4c3.6-3.8,10.4-2.6,13.9,1.3c3.5,3.9,4.4,9.4,4.6,14.6c0.2,5.2-0.2,10.5,1.3,15.5
  c0.4,1.2,0.9,2.5,1.9,3.3c2.2,1.9,5.8,0.8,7.6-1.5c1.7-2.3,2-5.4,2-8.3c0.1-6.7-0.7-13.5,1.5-19.8c2.1-6.3,8.4-11.9,14.9-10.5
  c5.4,1.2,9,7.4,8,12.8c-1,5.5-5.9,9.8-11.3,10.9c-1.5,0.3-3.1,0.4-4.5-0.2c-3.5-1.4-4.2-6.1-3.5-9.8c2.2-11.3,12.8-19.4,23.9-22.8
  c11.1-3.4,22.8-3.2,34.3-4.4c3.9-0.4,7.9-1,11.3-2.9c7.6-4.1,11.2-13.2,11.7-21.9c1-17.7-9.6-36-26.1-42.5
  c-16.5-6.6-37.6,0.2-46.1,15.9c-8.4,15.6-1.5,38,14.8,45c6.5,2.8,13.8,3.2,20.8,4c9,1,18,2.6,26,6.8s14.7,11.6,16.3,20.4
  c0.9,5.1,0,10.7-3.5,14.5c-3.5,3.8-9.8,5.1-14,2.1c-1.7-1.2-2.9-3-3.8-4.8c-2.3-4.5-3-10-1-14.6c2-4.6,7-8.1,12-7.3
  c7.1,1,10.8,9.1,11.8,16.2c1,7.1,0.9,14.9,5.3,20.5c0.6,0.7,1.3,1.4,2.2,1.6c0.9,0.1,1.8-0.3,2.6-0.9c4.8-3.5,6.4-9.9,7.1-15.9
  c0.6-5.9,0.6-12.2,3.4-17.4s9.7-9,14.9-6c5.3,3.1,5.3,10.7,3.8,16.6c-1.2,4.7-4.5,10.2-9.3,9.5c-2.1-0.3-3.8-1.8-5.1-3.4
  c-6.5-7.9-5.6-20.8,2-27.7c6.8-6.2,16.9-6.9,26.1-6.5c9.2,0.4,18.8,1.7,27.4-1.5c15.1-5.6,22.5-25,17.2-40.2s-20.9-25.5-37-27.2
  c-5.5-0.6-11.2-0.2-16.2,2.2c-10.4,5-14.9,17.6-15.8,29.1c-0.6,8,0.1,16.6,4.7,23.3c6.5,9.5,18.9,12.6,30.3,14
  c11.4,1.3,23.5,1.8,31.5,7.3c8,5.5,11.7,13.3,11.2,20.9c-0.2,3.6-1.7,7.5-5,8.9c-2.1,0.9-4.5,0.5-6.6-0.3c-5.5-2.2-9.4-8.4-8.1-14.2
  c1.3-5.8,8.5-9.7,13.7-6.9c2.8,1.5,4.5,4.4,6,7.2c5,10,8,21.1,8.5,32.3c0.1,2.5,0.1,5,1,7.3c2.4,7,10.7,9.6,17.9,11.3
  c4.8,1.1,10.4,2.1,14-1.3"/>
</svg>

<script>
    // Get a reference to the <path>
var path = document.querySelector('#star-path');

// Get length of path... ~577px in this case
var pathLength = path.getTotalLength();

// Make very long dashes (the length of the path itself)
path.style.strokeDasharray = pathLength + ' ' + pathLength;

// Offset the dashes so the it appears hidden entirely
path.style.strokeDashoffset = pathLength;

// Jake Archibald says so
// https://jakearchibald.com/2013/animated-line-drawing-svg/
path.getBoundingClientRect();

// When the page scrolls...
window.addEventListener("scroll", function(e) {
 
  // What % down is it? 
  // https://stackoverflow.com/questions/2387136/cross-browser-method-to-determine-vertical-scroll-percentage-in-javascript/2387222#2387222
  // Had to try three or four differnet methods here. Kind of a cross-browser nightmare.
  var scrollPercentage = (document.documentElement.scrollTop + document.body.scrollTop) / (document.documentElement.scrollHeight - document.documentElement.clientHeight);
    
  // Length to offset the dashes
  var drawLength = pathLength * scrollPercentage;
  
  // Draw in reverse
  path.style.strokeDashoffset = pathLength - drawLength;
    
  // When complete, remove the dash array, otherwise shape isn't quite sharp
 // Accounts for fuzzy math
  if (scrollPercentage >= 0.99) {
    path.style.strokeDasharray = "none";
    
  } else {
    path.style.strokeDasharray = pathLength + ' ' + pathLength;
  }
  
});
</script>
</body>
</html>